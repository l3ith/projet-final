<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="inscription.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
    crossorigin="anonymous"
  />
  <link rel="shortcut icon" href="https://www.iconpacks.net/icons/1/free-user-login-icon-305-thumb.png" type="image/x-icon">
    <title>log in</title>
</head>
<body>
  <div id="bg-dv"></div>
  <div class="interBtn">
    <i style="font-size:35px;color:rgb(233, 233, 233)" class="fas fa-sign-in-alt"></i>
  </div>
    <div class="bg-dif">
      <div class="bg-r"></div>
      <div class="bg-lr"></div>
    </div>
    <div style="background-color:rgba(255,255,255,.9);padding:1.5em;border-radius:10px">
    <h1 style="font-size:30px;color:black;font-weight:900;text-align:center">Welcome to spotify.tn</h1>
    <form id="sig" class="box">
      <h1 style="color:black">create your account</h1>
        <div>
            <label for="name">name:</label>
            <input type="text" name="name" placeholder="" id="name">
           </div>
        <div>
            <label for="mail">mail:</label>
            <input type="mail" name="mail" placeholder="" id="email"  >
           </div>
        <div>
            <label for="password">password:</label>
            <input type="password" name="password" placeholder="" id="password" >
            </div>
        <div>
            <label for="password">ps-confirmation:</label>
            <input type="password" name="password" placeholder="" id="pass2" >
           </div>
           <div>
            <input type="submit" value="register" id="valider">
           </div>
    </form>
    <form id="fr_lg">
      <h1 style="color:black">you already have one ? just login </h1>
      <div>
      <label for="email">email</label>
        <input type="email" value="" placeholder="" id="l_email">
      </div>
      <div>
        <label for="password">password</label>
        <input type="password" value=""  id="l_password">
      </div>
        <input type="submit" value="login">
    </form>
  </div>
    <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-firestore.js"></script>
    <script>
    var firebaseConfig = {
    apiKey: "AIzaSyDeHG4y6xCyOZE_gVuUChW_wieMFlZBf8k",
    authDomain: "spotify-b7a6a.firebaseapp.com",
    projectId: "spotify-b7a6a",
    storageBucket: "spotify-b7a6a.appspot.com",
    messagingSenderId: "534726624685",
    appId: "1:534726624685:web:d87ec18409fae8bee80d24",
    measurementId: "G-HPTGNNTGH2"
    };

    firebase.initializeApp(firebaseConfig);
        var fr = document.getElementById("sig");
        fr.addEventListener("submit",(e)=>{
            console.log("Sign")
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            firebase.auth().createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
    var user = userCredential.user;
    localStorage.setItem("auth",JSON.stringify(user));
    window.location.href = "/projet%20final%20v2/index.html?type=rock";
  })
  .catch((error) => {
    var errorCode = error.code;
    var errorMessage = error.message;
    // ..
  }); 
        })
    document.getElementById("fr_lg").addEventListener("submit",(e)=>{
        e.preventDefault();
        const email = document.getElementById("l_email").value;
        const password = document.getElementById("l_password").value;
        firebase.auth().signInWithEmailAndPassword(email, password)
  .then((userCredential) => {
    // Signed in
    var user = userCredential.user;
    localStorage.setItem("auth",JSON.stringify(user));
    window.location.href = "/projet%20final%20v2/index.html?type=rock";
  })
  .catch((error) => {
    var errorCode = error.code;
    var errorMessage = error.message;
  });
    })
    </script>
    <script>
       const br = document.getElementsByClassName("bg-r")[0];
        const bl = document.getElementsByClassName("bg-lr")[0];
      function animate(frame,delay,stopAfter,cb){
        
        setTimeout(()=>{
        const animFrames = setInterval(()=>{
            cb()
        },frame);
        setTimeout(()=>{
        clearInterval(animFrames)
        document.getElementsByClassName("bg-dif")[0].remove();
        document.getElementsByClassName("interBtn")[0].remove()
        },stopAfter)
      },delay)
      }
      document.getElementsByClassName("interBtn")[0].addEventListener("click",(e)=>{
        let pos = 0;
      let add = 7;
      document.getElementsByClassName("interBtn")[0].style.transform = "scale(0,0)";
      animate(5,100,2000,()=>{
        add -= 0.02;
        pos += add;
        bl.style.transform = "translateX(" + pos + "px)"
        br.style.transform= "translateX(" + -pos + "px)";
      });
      })  
      
    </script>
     <!--fontawesome js-->
     <script
     src="https://kit.fontawesome.com/e6b1bf5de5.js"
     crossorigin="anonymous" >
</script>
<script>
  var btn = document.getElementById('valider')
  btn.addEventListener('click',(e)=>{
   var nom = document.getElementById('name').value
   var mail = document.getElementById('email').value
   var mdp= document.getElementById('password').value
   var mdp2=document.getElementById('pass2').value
   console.log(mdp)
   if(nom==''){alert('le nom est obligatoire')}
   else if(mail.length==0 || mail.indexOf('@')==-1 || mail.indexOf('.')==-1 || mail.indexOf('@')> mail.indexOf('.')) {alert('le mail est obligatoire et doit etre sous la forme ex@ex.ex')} 
   else if (mdp.length<8) {alert(' le mot de passe est un champ obligatoire et doit contenir au moin 8 caractÃ¨re')}
   else if (mdp2!=mdp) {alert('les deux mot de passe doivent etre identiques')}
  })

</script>
</body>
</html>